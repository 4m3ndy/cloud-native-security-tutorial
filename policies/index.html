


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Getting started with cloud native security">
      
      
      
        <meta name="author" content="Liz Rice and Michael Hausenblas">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Policies - Cloud Native Security Tutorial</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700%7CPT+Mono&display=fallback">
        <style>body,input{font-family:"Lato",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"PT Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#policies" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Cloud Native Security Tutorial" class="md-header-nav__button md-logo" aria-label="Cloud Native Security Tutorial">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17a2 2 0 002-2 2 2 0 00-2-2 2 2 0 00-2 2 2 2 0 002 2m6-9a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V10a2 2 0 012-2h1V6a5 5 0 015-5 5 5 0 015 5v2h1m-6-5a3 3 0 00-3 3v2h6V6a3 3 0 00-3-3z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Cloud Native Security Tutorial
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Policies
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/k8s-sec/cloud-native-security-tutorial/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    k8s-sec/cloud-native-security-tutorial
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cloud Native Security Tutorial" class="md-nav__button md-logo" aria-label="Cloud Native Security Tutorial">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 17a2 2 0 002-2 2 2 0 00-2-2 2 2 0 00-2 2 2 2 0 002 2m6-9a2 2 0 012 2v10a2 2 0 01-2 2H6a2 2 0 01-2-2V10a2 2 0 012-2h1V6a5 5 0 015-5 5 5 0 015 5v2h1m-6-5a3 3 0 00-3 3v2h6V6a3 3 0 00-3-3z"/></svg>

    </a>
    Cloud Native Security Tutorial
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/k8s-sec/cloud-native-security-tutorial/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    k8s-sec/cloud-native-security-tutorial
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../introduction/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../preparation/" title="Preparation" class="md-nav__link">
      Preparation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../compromise/" title="Compromise a pod!" class="md-nav__link">
      Compromise a pod!
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../scanning/" title="Scanning" class="md-nav__link">
      Scanning
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Policies
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Policies" class="md-nav__link md-nav__link--active">
      Policies
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#least-privileges" class="md-nav__link">
    Least privileges
  </a>
  
    <nav class="md-nav" aria-label="Least privileges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-security-context" class="md-nav__link">
    Using a security context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-policies" class="md-nav__link">
    Network policies
  </a>
  
    <nav class="md-nav" aria-label="Network policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation_1" class="md-nav__link">
    Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limit-ingress-traffic" class="md-nav__link">
    Limit ingress traffic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-purpose-policies" class="md-nav__link">
    General purpose policies
  </a>
  
    <nav class="md-nav" aria-label="General purpose policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opa-in-action" class="md-nav__link">
    OPA in action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opa-gatekeeper" class="md-nav__link">
    OPA Gatekeeper
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../settings/" title="Secure settings" class="md-nav__link">
      Secure settings
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../gitops/" title="GitOps" class="md-nav__link">
      GitOps
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../conclusions/" title="Conclusion" class="md-nav__link">
      Conclusion
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#least-privileges" class="md-nav__link">
    Least privileges
  </a>
  
    <nav class="md-nav" aria-label="Least privileges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation" class="md-nav__link">
    Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-a-security-context" class="md-nav__link">
    Using a security context
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-policies" class="md-nav__link">
    Network policies
  </a>
  
    <nav class="md-nav" aria-label="Network policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparation_1" class="md-nav__link">
    Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limit-ingress-traffic" class="md-nav__link">
    Limit ingress traffic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-purpose-policies" class="md-nav__link">
    General purpose policies
  </a>
  
    <nav class="md-nav" aria-label="General purpose policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opa-in-action" class="md-nav__link">
    OPA in action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opa-gatekeeper" class="md-nav__link">
    OPA Gatekeeper
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/k8s-sec/cloud-native-security-tutorial/edit/master/docs/policies.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="policies">Policies<a class="headerlink" href="#policies" title="Permanent link">&para;</a></h1>
<p>One important tool in the defense in depth strategy are policies. These define
what is or is not allowed and part of it is usually an enforcement component.
In this section we will have a look at a number of different policies and how
you can apply them.</p>
<p>In the context of policies, the concept of least privileges is an important one,
so let's have a look at this for starters.</p>
<h2 id="least-privileges">Least privileges<a class="headerlink" href="#least-privileges" title="Permanent link">&para;</a></h2>
<p>With least privileges we mean to equip someone or something with exactly the
rights to carry out their or its task but not more. For example, if you consider
a program that needs to read from a specific location in the filesystem then
the operation (<code>read</code>) and the location (say, <code>/data</code>) would determine what
permissions are necessary. Conversely, said program would <em>not</em> need <code>write</code> access
in addition and hence this would violate the least privileges principle.</p>
<p>First off we start with the simple case of a Kubernetes security context, 
allowing you to specify runtime policies around privileges and access control.</p>
<h3 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h3>
<p>Let's create the cluster for it:</p>
<div class="highlight"><pre><span></span><code>kind create cluster --name cnsectut \
     --config res/security-context-cluster-config.yaml
</code></pre></div>

<h3 id="using-a-security-context">Using a security context<a class="headerlink" href="#using-a-security-context" title="Permanent link">&para;</a></h3>
<p>We will be using an <a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/">example from the Kubernetes docs</a>
so that you can read up on the details later on. </p>
<p>First, launch the <a href="https://github.com/k8s-sec/cloud-native-security-tutorial/blob/master/res/pod-security-context.yaml">pod with a security context</a> defined like so:</p>
<div class="highlight"><pre><span></span><code>kubectl apply -f https://raw.githubusercontent.com/k8s-sec/cloud-native-security-tutorial/master/res/pod-security-context.yaml
</code></pre></div>

<p>Next, enter the pod:</p>
<div class="highlight"><pre><span></span><code>kubectl exec -it security-context -- sh
</code></pre></div>

<p>And, in the pod, create a file as shown:</p>
<div class="highlight"><pre><span></span><code>echo something &gt; /data/content ; cd /data &amp;&amp; id
</code></pre></div>

<p>What you see here is how the security context defined in the pod enforces file
and group ownership. But who enforces the definition of security contexts? That
is, how can you make sure that a developer creating a pod spec in fact thinks
of this? Enter <a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy/">Pod Security
Policies</a> or
PSP for short.</p>
<p>Learn more about least privileges practices in the container runtime context via:</p>
<ul>
<li><a href="https://rootlesscontaine.rs/">rootlesscontaine.rs</a></li>
<li><a href="http://canihaznonprivilegedcontainers.info/">canihaznonprivilegedcontainers.info</a></li>
</ul>
<p>Clean up with <code>kind delete cluster --name cnsectut</code> when you're done exploring
this topic.</p>
<h2 id="network-policies">Network policies<a class="headerlink" href="#network-policies" title="Permanent link">&para;</a></h2>
<p>So runtime policies are fun, but not the only thing that matters: next up, we
have a look at network policies. These kind of policies allow you to control
the communication patterns in-cluster (between pods) and concerning the outside
world (ingress and egress traffic):</p>
<p><img alt="Kubernetes networking overview" src="../img/kube-networking.png" /></p>
<p>You might be surprised to learn that in Kubernetes by default all traffic
(in-cluster and to/from the outside world) is allowed. That is, any pod can see
and talk to any other pod by default as well as any connection to a pod running in your
Kubernetes cluster.</p>
<h3 id="preparation_1">Preparation<a class="headerlink" href="#preparation_1" title="Permanent link">&para;</a></h3>
<p>Let's create the cluster for the network policies walkthrough. </p>
<p>The following can take a minute or two, depending on if you've pulled the
container images before or doing it the first time (then it can take 10min or more):</p>
<div class="highlight"><pre><span></span><code>kind create cluster --name cnnp --config res/network-policy-cluster-config.yaml
</code></pre></div>

<p>Next, install the Calico controller and custom resources
(this is the CNI plugin that allows us to enforce the network policies):</p>
<div class="highlight"><pre><span></span><code>kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml
</code></pre></div>

<p>Then, we need to patch the setup due to the fact we're using <code>kind</code> here 
(kudos to <a href="https://alexbrand.dev/post/creating-a-kind-cluster-with-calico-networking/">Alex</a>
for the patch instructions):</p>
<div class="highlight"><pre><span></span><code>kubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true
</code></pre></div>

<p>Now you can verify the setup, and note that it can take some 5 min until 
you see all pods in the <code>Running</code> state:</p>
<div class="highlight"><pre><span></span><code>kubectl -n kube-system get pods | grep calico-node
</code></pre></div>

<p>Last but not least we install <a href="https://www.getambassador.io/">Ambassador</a> as an
ingress controller so that we can access to workloads from outside of the cluster:</p>
<div class="highlight"><pre><span></span><code>kubectl apply -f https://github.com/datawire/ambassador-operator/releases/latest/download/ambassador-operator-crds.yaml &amp;&amp; \
kubectl apply -n ambassador -f https://github.com/datawire/ambassador-operator/releases/latest/download/ambassador-operator-kind.yaml &amp;&amp; \
kubectl wait --timeout=180s -n ambassador --for=condition=deployed ambassadorinstallations/ambassador
</code></pre></div>

<p>And with that we're ready to apply some network policies.</p>
<h3 id="limit-ingress-traffic">Limit ingress traffic<a class="headerlink" href="#limit-ingress-traffic" title="Permanent link">&para;</a></h3>
<p>Now let's see network policies in action by creating a public-facing workload
and define the communication paths.</p>
<p>First off, we want to do all of the following in a dedicated namespace called
<code>npdemo</code>:</p>
<div class="highlight"><pre><span></span><code>kubectl create ns npdemo
</code></pre></div>

<p>Now, create the workload (deployment, service, ingress):</p>
<div class="highlight"><pre><span></span><code>kubectl -n npdemo apply -f res/np-workload.yaml
</code></pre></div>

<p>When you now query the endpoint defined by the <a href="https://github.com/k8s-sec/cloud-native-security-tutorial/blob/b5efb0ee54fbb3ded4f5cac8d7834f1e59881948/res/np-workload.yaml#L33">ingress resource</a>
you deployed in the previous step you will find that it works as expected
(remember: by default, all is allowed/open):</p>
<div class="highlight"><pre><span></span><code>curl localhost/api
</code></pre></div>

<p>Now we shut down all traffic with:</p>
<div class="highlight"><pre><span></span><code>kubectl -n npdemo apply -f res/deny-all.yaml
</code></pre></div>

<p>And try again:</p>
<div class="highlight"><pre><span></span><code>curl localhost/api
</code></pre></div>

<p>As we'd have hoped and expected the access is now denied (might need to give it
a second or so until the change is picked up).</p>
<p>But now, how do we allow traffic to the frontend (represented by the NGINX web
server)? Well, we define another network policy that allows ingress to stuff
labelled with <code>role=frontend</code>:</p>
<div class="highlight"><pre><span></span><code>kubectl -n npdemo apply -f res/allow-frontend.yaml &amp;&amp; \
kubectl -n npdemo label pods --selector=app=nginx role=frontend
</code></pre></div>

<p>And now it should work again:</p>
<div class="highlight"><pre><span></span><code>curl localhost/api
</code></pre></div>

<p>Learn more about network policies via:</p>
<ul>
<li><a href="https://banzaicloud.com/blog/network-policy/">Exploring Network Policies in Kubernetes</a></li>
<li><a href="https://medium.com/@tufin/best-practices-for-kubernetes-network-policies-2b643c4b1aa">Best Practices for Kubernetes Network Policies</a></li>
<li><a href="https://ahmet.im/blog/kubernetes-network-policy/">Securing Kubernetes Cluster Networking</a></li>
</ul>
<p>Clean up with <code>kind delete cluster --name cnnp</code> when you're done exploring
this topic.</p>
<h2 id="general-purpose-policies">General purpose policies<a class="headerlink" href="#general-purpose-policies" title="Permanent link">&para;</a></h2>
<p>The Open Policy Agent (OPA) project is a </p>
<h3 id="opa-in-action">OPA in action<a class="headerlink" href="#opa-in-action" title="Permanent link">&para;</a></h3>
<p>mini example via https://play.openpolicyagent.org/</p>
<h3 id="opa-gatekeeper">OPA Gatekeeper<a class="headerlink" href="#opa-gatekeeper" title="Permanent link">&para;</a></h3>
<p>Learn more about OPA via:</p>
<ul>
<li><a href="https://www.cncf.io/blog/2020/08/13/introducing-policy-as-code-the-open-policy-agent-opa/">Introducing Policy As Code: The Open Policy Agent (OPA)</a></li>
<li><a href="https://blog.openpolicyagent.org/">OPA blog</a></li>
<li><a href="https://academy.styra.com/">Styra Academy</a></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../scanning/" title="Scanning" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Scanning
              </div>
            </div>
          </a>
        
        
          <a href="../settings/" title="Secure settings" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Secure settings
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; Liz Rice and Michael Hausenblas
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>